<!DOCTYPE html>
<html lang="en">
<head>
  <!-- HEAD -->
  <meta charset="UTF-8" />
  <title>A* Interactive Tutorial</title>
  <link rel="stylesheet" href="css/base.css" />

  <!-- CYTOSCAPE TO GENERATE GRAPH -->
  <script src="https://unpkg.com/cytoscape@3.26.0/dist/cytoscape.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
  <!-- FEEDBACK MODAL (kept for parity with DFS/BFS) -->
  <div id="dfs-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <span id="dfs-modal-message"></span>
      <button id="dfs-modal-close">Try Again</button>
    </div>
  </div>

  <!-- BODY -->
  <div class="container">
    <!-- BACK & THEME TOGGLE (match other activities) -->
    <a href="index.html" id="back-home" aria-label="Back to Home">⌂ Home</a>
    <button id="theme-toggle" aria-label="Toggle Theme">
      <img src="icons/dark_mode.svg" alt="Toggle dark mode" width="28" height="28" />
    </button>

    <!-- PAGE HEADER -->
    <h1>A* Search (A*) — Interactive Tutorial</h1>

    <!-- INSTRUCTION TEXT (same class/ids as others) -->
    <p id="example-instructions" class="instructions" style="display:none;">
      <strong>Click on Run Example A*</strong> to see the algorithm compute the path from start to goal.
      Then try the <strong>Interactive A*</strong> mode!
    </p>

    <p id="interactive-instructions" class="instructions" style="display:none;">
      <strong>Click the next node on the A* path</strong> to follow the optimal route from start to goal.
    </p>

    <p id="quiz-instructions" class="instructions" style="display:none;">
      <strong>Answer each question</strong> about A*: f(n)=g(n)+h(n), admissible/consistent heuristics, and
      min-heap selection.
    </p>

    <p id="coding-instructions" class="instructions" style="display:none;">
      <strong>Fill in the blanks</strong> in the A* skeleton to practice selecting the min-f node and updating f.
    </p>

    <!-- BUTTONS (must be direct children of .controls for CSS to match) -->
    <div class="controls">
      <button id="run-example-btn">Run Example A*</button>
      <button id="start-interactive-btn">Start Interactive A*</button>
      <button id="take-quiz-btn">Take a Quiz</button>
      <button id="togglePseudocodeBtn" class="btn primary" aria-pressed="false">Show pseudocode</button>
      <button id="start-coding-btn">Start Coding Activity</button>
    </div>

    <!-- VISUALIZATION -->
    <section id="visualization" class="viz" aria-label="Graph visualization"></section>

    <!-- QUIZ -->
    <section id="astar-quiz" class="quiz" style="display:none;" aria-live="polite"></section>

    <!-------------------- CODING ACTIVITY PANEL (A*) -------------------->
<section id="coding-activity-astar" class="coding-panel" style="display:none;">
  <!-- READ-ONLY SCAFFOLD + BLANKS -->
  <pre class="code">
from collections import defaultdict

def astar(graph, start, goal, h):
    open_set = { start }
    came_from = {}
    g = defaultdict(lambda: float('inf'))
    f = defaultdict(lambda: float('inf'))

    g[start] = 0
    f[start] = h(start)

    while open_set:
        # choose node in open_set with the smallest f-score
        current = <input class="blank" id="astar-blank1" size="32" aria-label="select min f from open_set">   # blank #1

        if current == goal:
            return reconstruct_path(came_from, current)

        open_set.remove(current)
        for nb in graph[current]:
            # assume unit edge cost if not otherwise provided
            tentative = g[current] + cost(current, nb)
            if tentative < g[nb]:
                came_from[nb] = current
                g[nb] = tentative
                # update f with g + h
                f[nb] = <input class="blank" id="astar-blank2" size="18" aria-label="g plus h for neighbor">   # blank #2
                open_set.add(nb)
  </pre>

  <!-- CONTROLS -->
  <div class="controls">
    <button id="run-astar">Run</button>
  </div>

  <!-- OUTPUT / FEEDBACK -->
  <div id="py-output-astar" class="feedback" aria-live="polite"></div>
</section>

<!-- FEEDBACK BAR -->
<div id="astar-feedback" class="feedback"></div>

    <!-- FEEDBACK BAR -->
    <div id="astar-feedback" class="feedback"></div>

    <!-- PSEUDOCODE SIDE PANEL (same structure/classes as others) -->
    <aside id="pseudocodePanel" aria-hidden="true">
      <div class="panel-header">
        <h2>A* Search (A*) — Pseudocode</h2>
        <button id="closePseudocodeBtn" class="icon-btn" aria-label="Close">✕</button>
      </div>

      <div class="pseudo-toggle" role="tablist" aria-label="Pseudocode variants">
        <button class="tab active" data-target="pseudo-iterative" role="tab" aria-selected="true">Iterative (Priority Queue)</button>
        <button class="tab" data-target="pseudo-recursive" role="tab" aria-selected="false" aria-controls="pseudo-recursive">Notes</button>
      </div>

      <div class="pseudo-content" aria-live="polite">
<pre id="pseudo-iterative" role="tabpanel">
function AStar(Graph, start, goal):
    openSet = {start}
    cameFrom = empty map
    for each v in Graph:
        g[v] = ∞; f[v] = ∞
    g[start] = 0
    f[start] = h(start)

    while openSet not empty:
        current = argmin_{n in openSet} f[n]
        if current == goal: return RECONSTRUCT(cameFrom, current)
        remove current from openSet
        for each neighbor in neighbors(current):
            tentative = g[current] + cost(current, neighbor)
            if tentative &lt; g[neighbor]:
                cameFrom[neighbor] = current
                g[neighbor] = tentative
                f[neighbor] = tentative + h(neighbor)
                add neighbor to openSet
    return failure
</pre>
<pre id="pseudo-recursive" role="tabpanel">
# A* is almost always implemented iteratively using a priority queue (min-heap).
# Recursive variants exist but are less common in practice and teaching.
</pre>
      </div>
    </aside>
  </div>

  <!-- SCRIPTS (A* bundle + shared viz) -->
  <script src="js/AStar/astar.js"></script>
  <script src="js/AStar/visualization.js"></script>
  <script src="js/AStar/interactive.js"></script>
  <script src="js/AStar/quiz.js"></script>
  <script src="js/AStar/ui.js"></script>
  <script src="js/AStar/codingActivity.js"></script>
</body>
</html>
